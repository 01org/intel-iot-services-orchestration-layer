mqtt 服务
================

## mqtt发布消息服务

### 描述

提供向mqtt服务器发布特定主题消息的服务

必须配置服务器url，由‘ip’和’port‘组成，可以以’mqtt://‘开头，也可以不加这个字符串，因为此服务会自动给url加上此字符串。

### 配置

’server‘：字符串，mqtt服务器url。

’topic‘：字符串，发布的主题。

### 输入

’message‘：字符串，将被发布的消息。

### 输出

’status‘：布尔型，值为true则表示消息发布成功，否则发布失败。

### 例子

![](./pic/mqtt_publish.png)

在这个例子中，每隔2秒钟，此服务就会在0到100之间随机产生一个数字，然后发布到mqtt服务器上。最后会在’text‘widget中显示这个结果。

## mqtt订阅服务

### 描述

提供从mqtt服务器上订阅特定主题的消息。

必须配置服务器url，包含’ip‘和’port‘，可以以’mqtt://‘开头，也可以不加这个字符串，因为此服务会自动给url加上这个字符串。

### 配置

’server‘：字符串， mqtt服务器url。

’topic‘：字符串，订阅主题。

###输入

’on’：布尔型， 如果值为true，则向mqtt服务器发送请求。

###　输出

‘message’：字符串，从mqtt服务器收到的订阅消息。

###　例子

![](./pic/mqtt_subscribe.png)

在这个例子中，每隔１秒钟，此服务度会向ｍｑｔｔ服务器发送订阅请求，然后特定主题的消息，最后在‘Text’widget中显示。